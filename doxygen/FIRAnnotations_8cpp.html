<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CIRCT: lib/Dialect/FIRRTL/Import/FIRAnnotations.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CIRCT
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1a25ec519b6c1121408b67cc33ce3f15.html">Dialect</a></li><li class="navelem"><a class="el" href="dir_5ecba3b4683443cdd5d71918532517b3.html">FIRRTL</a></li><li class="navelem"><a class="el" href="dir_584dc79a83bdcfbf60e1c87cdd1df097.html">Import</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">FIRAnnotations.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="FIRAnnotations_8h_source.html">FIRAnnotations.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="AnnotationDetails_8h_source.html">AnnotationDetails.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="FIRParser_8h_source.html">circt/Dialect/FIRRTL/FIRParser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="FIRRTLOps_8h_source.html">circt/Dialect/FIRRTL/FIRRTLOps.h</a>&quot;</code><br />
<code>#include &quot;mlir/IR/BuiltinAttributes.h&quot;</code><br />
<code>#include &quot;mlir/IR/BuiltinTypes.h&quot;</code><br />
<code>#include &quot;mlir/IR/Diagnostics.h&quot;</code><br />
<code>#include &quot;mlir/IR/OperationSupport.h&quot;</code><br />
<code>#include &quot;llvm/ADT/StringSet.h&quot;</code><br />
<code>#include &quot;llvm/ADT/StringSwitch.h&quot;</code><br />
<code>#include &quot;llvm/ADT/TypeSwitch.h&quot;</code><br />
<code>#include &quot;llvm/Support/JSON.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for FIRAnnotations.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="FIRAnnotations_8cpp__incl.png" border="0" usemap="#lib_2Dialect_2FIRRTL_2Import_2FIRAnnotations_8cpp" alt=""/></div>
<map name="lib_2Dialect_2FIRRTL_2Import_2FIRAnnotations_8cpp" id="lib_2Dialect_2FIRRTL_2Import_2FIRAnnotations_8cpp">
<area shape="rect" title=" " alt="" coords="2485,5,2684,47"/>
<area shape="rect" href="FIRAnnotations_8h.html" title=" " alt="" coords="39,102,173,129"/>
<area shape="rect" href="AnnotationDetails_8h.html" title=" " alt="" coords="541,370,692,397"/>
<area shape="rect" href="FIRParser_8h.html" title=" " alt="" coords="369,363,517,404"/>
<area shape="rect" href="FIRRTLOps_8h.html" title=" " alt="" coords="1261,95,1409,136"/>
<area shape="rect" title=" " alt="" coords="1749,459,1935,486"/>
<area shape="rect" title=" " alt="" coords="2275,281,2435,307"/>
<area shape="rect" title=" " alt="" coords="2565,102,2722,129"/>
<area shape="rect" title=" " alt="" coords="2746,102,2941,129"/>
<area shape="rect" title=" " alt="" coords="2965,102,3122,129"/>
<area shape="rect" title=" " alt="" coords="3146,102,3325,129"/>
<area shape="rect" title=" " alt="" coords="3349,102,3519,129"/>
<area shape="rect" title=" " alt="" coords="3544,102,3697,129"/>
<area shape="rect" href="LLVM_8h.html" title=" " alt="" coords="722,459,877,486"/>
<area shape="rect" title=" " alt="" coords="24,191,188,218"/>
<area shape="rect" title=" " alt="" coords="622,541,774,568"/>
<area shape="rect" title=" " alt="" coords="798,541,1003,568"/>
<area shape="rect" href="FIRRTLDialect_8h.html" title=" " alt="" coords="1373,363,1521,404"/>
<area shape="rect" href="FIRRTLOpInterfaces_8h.html" title=" " alt="" coords="922,184,1087,225"/>
<area shape="rect" title=" " alt="" coords="723,281,887,307"/>
<area shape="rect" href="HWTypes_8h.html" title=" " alt="" coords="1995,281,2198,307"/>
<area shape="rect" href="FieldRef_8h.html" title=" " alt="" coords="503,191,675,218"/>
<area shape="rect" title=" " alt="" coords="1163,191,1297,218"/>
<area shape="rect" title=" " alt="" coords="1373,191,1559,218"/>
<area shape="rect" title=" " alt="" coords="1583,191,1786,218"/>
<area shape="rect" title=" " alt="" coords="1810,191,2023,218"/>
<area shape="rect" title=" " alt="" coords="2047,184,2229,225"/>
<area shape="rect" title=" " alt="" coords="2253,184,2439,225"/>
<area shape="rect" title=" " alt="" coords="699,184,847,225"/>
<area shape="rect" title=" " alt="" coords="1976,459,2103,486"/>
<area shape="rect" title=" " alt="" coords="1408,452,1559,493"/>
<area shape="rect" title=" " alt="" coords="1234,452,1383,493"/>
<area shape="rect" href="FIRRTLAnnotations_8h.html" title=" " alt="" coords="184,363,345,404"/>
<area shape="rect" href="FIRRTLAttributes_8h.html" title=" " alt="" coords="963,273,1111,315"/>
<area shape="rect" href="FIRRTLTypes_8h.html" title=" " alt="" coords="1373,273,1521,315"/>
<area shape="rect" title=" " alt="" coords="1758,281,1921,307"/>
<area shape="rect" title=" " alt="" coords="1135,281,1349,307"/>
<area shape="rect" title=" " alt="" coords="1545,273,1733,315"/>
<area shape="rect" title=" " alt="" coords="282,459,445,486"/>
<area shape="rect" title=" " alt="" coords="77,452,258,493"/>
<area shape="rect" title=" " alt="" coords="951,363,1122,404"/>
<area shape="rect" title=" " alt="" coords="1753,370,1872,397"/>
<area shape="rect" title=" " alt="" coords="1545,363,1693,404"/>
<area shape="rect" href="HWDialect_8h.html" title=" " alt="" coords="2275,370,2487,397"/>
<area shape="rect" title=" " alt="" coords="1974,370,2201,397"/>
<area shape="rect" title=" " alt="" coords="2393,459,2627,486"/>
<area shape="rect" title=" " alt="" coords="2135,459,2368,486"/>
<area shape="rect" title=" " alt="" coords="530,281,647,307"/>
<area shape="rect" title=" " alt="" coords="314,281,506,307"/>
</map>
</div>
</div>
<p><a href="FIRAnnotations_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5a44197db0a9fe5e27c42423efb57f52"><td class="memItemLeft" align="right" valign="top">static std::pair&lt; StringRef, llvm::Optional&lt; ArrayAttr &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FIRAnnotations_8cpp.html#a5a44197db0a9fe5e27c42423efb57f52">splitTarget</a> (StringRef target, MLIRContext *context)</td></tr>
<tr class="memdesc:a5a44197db0a9fe5e27c42423efb57f52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Split a target into a base target (including a reference if one exists) and an optional array of subfield/subindex tokens.  <a href="FIRAnnotations_8cpp.html#a5a44197db0a9fe5e27c42423efb57f52">More...</a><br /></td></tr>
<tr class="separator:a5a44197db0a9fe5e27c42423efb57f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39ced8bba6b56d09b893d0dda2a46c29"><td class="memItemLeft" align="right" valign="top">static SmallVector&lt; std::tuple&lt; std::string, StringRef, StringRef &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FIRAnnotations_8cpp.html#a39ced8bba6b56d09b893d0dda2a46c29">expandNonLocal</a> (StringRef target)</td></tr>
<tr class="memdesc:a39ced8bba6b56d09b893d0dda2a46c29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Split out non-local paths.  <a href="FIRAnnotations_8cpp.html#a39ced8bba6b56d09b893d0dda2a46c29">More...</a><br /></td></tr>
<tr class="separator:a39ced8bba6b56d09b893d0dda2a46c29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40727507e2d72361fb7f174c0132329c"><td class="memItemLeft" align="right" valign="top">static FlatSymbolRefAttr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FIRAnnotations_8cpp.html#a40727507e2d72361fb7f174c0132329c">buildNLA</a> (CircuitOp circuit, size_t nlaSuffix, SmallVectorImpl&lt; std::tuple&lt; std::string, StringRef, StringRef &gt;&gt; &amp;nlas)</td></tr>
<tr class="memdesc:a40727507e2d72361fb7f174c0132329c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make an anchor for a non-local annotation.  <a href="FIRAnnotations_8cpp.html#a40727507e2d72361fb7f174c0132329c">More...</a><br /></td></tr>
<tr class="separator:a40727507e2d72361fb7f174c0132329c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63f408035ed17701d9b770ebd6645d53"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FIRAnnotations_8cpp.html#a63f408035ed17701d9b770ebd6645d53">appendTarget</a> (NamedAttrList &amp;annotation, ArrayAttr target)</td></tr>
<tr class="memdesc:a63f408035ed17701d9b770ebd6645d53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append the argument <code>target</code> to the <code>annotation</code> using the key "target".  <a href="FIRAnnotations_8cpp.html#a63f408035ed17701d9b770ebd6645d53">More...</a><br /></td></tr>
<tr class="separator:a63f408035ed17701d9b770ebd6645d53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0262184e3fcde76a2ebb229f457f8cf3"><td class="memItemLeft" align="right" valign="top">static std::pair&lt; StringRef, llvm::Optional&lt; ArrayAttr &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FIRAnnotations_8cpp.html#a0262184e3fcde76a2ebb229f457f8cf3">splitAndAppendTarget</a> (NamedAttrList &amp;annotation, StringRef target, MLIRContext *context)</td></tr>
<tr class="memdesc:a0262184e3fcde76a2ebb229f457f8cf3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutably update a prototype Annotation (stored as a <code>NamedAttrList</code>) with subfield/subindex information from a Target string.  <a href="FIRAnnotations_8cpp.html#a0262184e3fcde76a2ebb229f457f8cf3">More...</a><br /></td></tr>
<tr class="separator:a0262184e3fcde76a2ebb229f457f8cf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c4d0e469072b50617c1962310e2551e"><td class="memItemLeft" align="right" valign="top">static llvm::Optional&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FIRAnnotations_8cpp.html#a4c4d0e469072b50617c1962310e2551e">canonicalizeTarget</a> (StringRef target)</td></tr>
<tr class="memdesc:a4c4d0e469072b50617c1962310e2551e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return an input <code>target</code> string in canonical form.  <a href="FIRAnnotations_8cpp.html#a4c4d0e469072b50617c1962310e2551e">More...</a><br /></td></tr>
<tr class="separator:a4c4d0e469072b50617c1962310e2551e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc0b2652aad68a41fb4bcd6115cb74c5"><td class="memTemplParams" colspan="2">template&lt;typename A &gt; </td></tr>
<tr class="memitem:adc0b2652aad68a41fb4bcd6115cb74c5"><td class="memTemplItemLeft" align="right" valign="top">static A&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="FIRAnnotations_8cpp.html#adc0b2652aad68a41fb4bcd6115cb74c5">tryGetAs</a> (DictionaryAttr &amp;dict, const Attribute &amp;root, StringRef key, Location loc, Twine className, Twine path=Twine())</td></tr>
<tr class="memdesc:adc0b2652aad68a41fb4bcd6115cb74c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements the same behavior as DictionaryAttr::getAs&lt;A&gt; to return the value of a specific type associated with a key in a dictionary.  <a href="FIRAnnotations_8cpp.html#adc0b2652aad68a41fb4bcd6115cb74c5">More...</a><br /></td></tr>
<tr class="separator:adc0b2652aad68a41fb4bcd6115cb74c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82e56c4fa16c553bfcb0f6152e824002"><td class="memItemLeft" align="right" valign="top">static Attribute&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FIRAnnotations_8cpp.html#a82e56c4fa16c553bfcb0f6152e824002">convertJSONToAttribute</a> (MLIRContext *context, json::Value &amp;value, json::Path p)</td></tr>
<tr class="memdesc:a82e56c4fa16c553bfcb0f6152e824002"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert arbitrary JSON to an MLIR Attribute.  <a href="FIRAnnotations_8cpp.html#a82e56c4fa16c553bfcb0f6152e824002">More...</a><br /></td></tr>
<tr class="separator:a82e56c4fa16c553bfcb0f6152e824002"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b7ceca4b490966d74dea962cf525bda"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FIRAnnotations_8cpp.html#a9b7ceca4b490966d74dea962cf525bda">addNLATargets</a> (MLIRContext *context, StringRef targetStrRef, CircuitOp circuit, size_t &amp;nlaNumber, NamedAttrList &amp;metadata, llvm::StringMap&lt; llvm::SmallVector&lt; Attribute &gt;&gt; &amp;mutableAnnotationMap)</td></tr>
<tr class="separator:a9b7ceca4b490966d74dea962cf525bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6e48751ebda828e118921ffad184de8"><td class="memItemLeft" align="right" valign="top">static Optional&lt; DictionaryAttr &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FIRAnnotations_8cpp.html#af6e48751ebda828e118921ffad184de8">parseAugmentedType</a> (MLIRContext *context, DictionaryAttr augmentedType, DictionaryAttr root, llvm::StringMap&lt; llvm::SmallVector&lt; Attribute &gt;&gt; &amp;newAnnotations, StringRef companion, StringAttr name, StringAttr defName, Optional&lt; IntegerAttr &gt; id, Optional&lt; StringAttr &gt;(description), Location loc, unsigned &amp;annotationID, Twine clazz, Twine path={})</td></tr>
<tr class="memdesc:af6e48751ebda828e118921ffad184de8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursively walk a sifive.enterprise.grandcentral.AugmentedType to extract any annotations it may contain.  <a href="FIRAnnotations_8cpp.html#af6e48751ebda828e118921ffad184de8">More...</a><br /></td></tr>
<tr class="separator:af6e48751ebda828e118921ffad184de8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6996c176d8479ba108e7e086ac09bf9a"><td class="memItemLeft" align="right" valign="top">static Optional&lt; Attribute &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FIRAnnotations_8cpp.html#a6996c176d8479ba108e7e086ac09bf9a">scatterOMIR</a> (Attribute original, unsigned &amp;annotationID, llvm::StringMap&lt; llvm::SmallVector&lt; Attribute &gt;&gt; &amp;newAnnotations, CircuitOp circuit, size_t &amp;nlaNumber)</td></tr>
<tr class="memdesc:a6996c176d8479ba108e7e086ac09bf9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursively walk Object Model IR and convert FIRRTL targets to identifiers while scattering trackers into the newAnnotations argument.  <a href="FIRAnnotations_8cpp.html#a6996c176d8479ba108e7e086ac09bf9a">More...</a><br /></td></tr>
<tr class="separator:a6996c176d8479ba108e7e086ac09bf9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a799efec92388cad96a6ba41a01f10cad"><td class="memItemLeft" align="right" valign="top">static Optional&lt; std::pair&lt; StringRef, DictionaryAttr &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FIRAnnotations_8cpp.html#a799efec92388cad96a6ba41a01f10cad">scatterOMField</a> (Attribute original, const Attribute root, unsigned &amp;annotationID, llvm::StringMap&lt; llvm::SmallVector&lt; Attribute &gt;&gt; &amp;newAnnotations, CircuitOp circuit, size_t &amp;nlaNumber, Location loc, unsigned index)</td></tr>
<tr class="memdesc:a799efec92388cad96a6ba41a01f10cad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert an Object Model Field into an optional pair of a string key and a dictionary attribute.  <a href="FIRAnnotations_8cpp.html#a799efec92388cad96a6ba41a01f10cad">More...</a><br /></td></tr>
<tr class="separator:a799efec92388cad96a6ba41a01f10cad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b26e92f469bbc09492a196426f058b"><td class="memItemLeft" align="right" valign="top">static Optional&lt; DictionaryAttr &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FIRAnnotations_8cpp.html#a88b26e92f469bbc09492a196426f058b">scatterOMNode</a> (Attribute original, const Attribute root, unsigned &amp;annotationID, llvm::StringMap&lt; llvm::SmallVector&lt; Attribute &gt;&gt; &amp;newAnnotations, CircuitOp circuit, size_t &amp;nlaNumber, Location loc)</td></tr>
<tr class="memdesc:a88b26e92f469bbc09492a196426f058b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert an Object Model Node to an optional dictionary, convert source locator strings to location attributes, and scatter FIRRTL targets into the circuit.  <a href="FIRAnnotations_8cpp.html#a88b26e92f469bbc09492a196426f058b">More...</a><br /></td></tr>
<tr class="separator:a88b26e92f469bbc09492a196426f058b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a946d0df8a0982b538165924b863462bb"><td class="memItemLeft" align="right" valign="top">static Optional&lt; Attribute &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FIRAnnotations_8cpp.html#a946d0df8a0982b538165924b863462bb">scatterOMIRAnnotation</a> (DictionaryAttr dict, unsigned &amp;annotationID, llvm::StringMap&lt; llvm::SmallVector&lt; Attribute &gt;&gt; &amp;newAnnotations, CircuitOp circuit, size_t &amp;nlaNumber, Location loc)</td></tr>
<tr class="memdesc:a946d0df8a0982b538165924b863462bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main entry point to handle scattering of an OMIRAnnotation.  <a href="FIRAnnotations_8cpp.html#a946d0df8a0982b538165924b863462bb">More...</a><br /></td></tr>
<tr class="separator:a946d0df8a0982b538165924b863462bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9b7ceca4b490966d74dea962cf525bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b7ceca4b490966d74dea962cf525bda">&#9670;&nbsp;</a></span>addNLATargets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string addNLATargets </td>
          <td>(</td>
          <td class="paramtype">MLIRContext *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">StringRef&#160;</td>
          <td class="paramname"><em>targetStrRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CircuitOp&#160;</td>
          <td class="paramname"><em>circuit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>nlaNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NamedAttrList &amp;&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">llvm::StringMap&lt; llvm::SmallVector&lt; Attribute &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>mutableAnnotationMap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="FIRAnnotations_8cpp_source.html#l00313">313</a> of file <a class="el" href="FIRAnnotations_8cpp_source.html">FIRAnnotations.cpp</a>.</p>

<p class="reference">References <a class="el" href="FIRAnnotations_8cpp_source.html#l00135">buildNLA()</a>, <a class="el" href="FIRAnnotations_8cpp_source.html#l00105">expandNonLocal()</a>, <a class="el" href="CalyxOps_8cpp_source.html#l00039">circt::calyx::direction::get()</a>, and <a class="el" href="FIRAnnotations_8cpp_source.html#l00165">splitAndAppendTarget()</a>.</p>

<p class="reference">Referenced by <a class="el" href="FIRAnnotations_8cpp_source.html#l00906">scatterOMIR()</a>.</p>

</div>
</div>
<a id="a63f408035ed17701d9b770ebd6645d53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63f408035ed17701d9b770ebd6645d53">&#9670;&nbsp;</a></span>appendTarget()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void appendTarget </td>
          <td>(</td>
          <td class="paramtype">NamedAttrList &amp;&#160;</td>
          <td class="paramname"><em>annotation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArrayAttr&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Append the argument <code>target</code> to the <code>annotation</code> using the key "target". </p>

<p class="definition">Definition at line <a class="el" href="FIRAnnotations_8cpp_source.html#l00153">153</a> of file <a class="el" href="FIRAnnotations_8cpp_source.html">FIRAnnotations.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="FIRAnnotations_8cpp_source.html#l00165">splitAndAppendTarget()</a>.</p>

</div>
</div>
<a id="a40727507e2d72361fb7f174c0132329c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40727507e2d72361fb7f174c0132329c">&#9670;&nbsp;</a></span>buildNLA()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static FlatSymbolRefAttr buildNLA </td>
          <td>(</td>
          <td class="paramtype">CircuitOp&#160;</td>
          <td class="paramname"><em>circuit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nlaSuffix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SmallVectorImpl&lt; std::tuple&lt; std::string, StringRef, StringRef &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>nlas</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make an anchor for a non-local annotation. </p>
<p>Use the expanded path to build the module and name list in the anchor. </p>

<p class="definition">Definition at line <a class="el" href="FIRAnnotations_8cpp_source.html#l00135">135</a> of file <a class="el" href="FIRAnnotations_8cpp_source.html">FIRAnnotations.cpp</a>.</p>

<p class="reference">References <a class="el" href="CalyxOps_8cpp_source.html#l00039">circt::calyx::direction::get()</a>.</p>

<p class="reference">Referenced by <a class="el" href="FIRAnnotations_8cpp_source.html#l00313">addNLATargets()</a>, and <a class="el" href="FIRAnnotations_8cpp_source.html#l01229">circt::firrtl::scatterCustomAnnotations()</a>.</p>

</div>
</div>
<a id="a4c4d0e469072b50617c1962310e2551e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c4d0e469072b50617c1962310e2551e">&#9670;&nbsp;</a></span>canonicalizeTarget()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static llvm::Optional&lt;std::string&gt; canonicalizeTarget </td>
          <td>(</td>
          <td class="paramtype">StringRef&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return an input <code>target</code> string in canonical form. </p>
<p>This converts a Legacy Annotation (e.g., A.B.C) into a modern annotation (e.g., ~A|B&gt;C). Trailing subfield/subindex references are preserved. </p>

<p class="definition">Definition at line <a class="el" href="FIRAnnotations_8cpp_source.html#l00177">177</a> of file <a class="el" href="FIRAnnotations_8cpp_source.html">FIRAnnotations.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="FIRAnnotations_8cpp_source.html#l01229">circt::firrtl::scatterCustomAnnotations()</a>, and <a class="el" href="FIRAnnotations_8cpp_source.html#l00906">scatterOMIR()</a>.</p>

</div>
</div>
<a id="a82e56c4fa16c553bfcb0f6152e824002"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82e56c4fa16c553bfcb0f6152e824002">&#9670;&nbsp;</a></span>convertJSONToAttribute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Attribute convertJSONToAttribute </td>
          <td>(</td>
          <td class="paramtype">MLIRContext *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">json::Value &amp;&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">json::Path&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert arbitrary JSON to an MLIR Attribute. </p>

<p class="definition">Definition at line <a class="el" href="FIRAnnotations_8cpp_source.html#l00259">259</a> of file <a class="el" href="FIRAnnotations_8cpp_source.html">FIRAnnotations.cpp</a>.</p>

<p class="reference">References <a class="el" href="CalyxOps_8cpp_source.html#l00039">circt::calyx::direction::get()</a>.</p>

</div>
</div>
<a id="a39ced8bba6b56d09b893d0dda2a46c29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39ced8bba6b56d09b893d0dda2a46c29">&#9670;&nbsp;</a></span>expandNonLocal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static SmallVector&lt;std::tuple&lt;std::string, StringRef, StringRef&gt; &gt; expandNonLocal </td>
          <td>(</td>
          <td class="paramtype">StringRef&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Split out non-local paths. </p>
<p>This will return a set of target strings for each named entity along the path. c|c:ai/Am:bi/Bm&gt;d.agg[3] -&gt; c|c&gt;ai, c|Am&gt;bi, c|Bm&gt;d.agg[2] </p>

<p class="definition">Definition at line <a class="el" href="FIRAnnotations_8cpp_source.html#l00105">105</a> of file <a class="el" href="FIRAnnotations_8cpp_source.html">FIRAnnotations.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="FIRAnnotations_8cpp_source.html#l00313">addNLATargets()</a>, and <a class="el" href="FIRAnnotations_8cpp_source.html#l01229">circt::firrtl::scatterCustomAnnotations()</a>.</p>

</div>
</div>
<a id="af6e48751ebda828e118921ffad184de8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6e48751ebda828e118921ffad184de8">&#9670;&nbsp;</a></span>parseAugmentedType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Optional&lt;DictionaryAttr&gt; parseAugmentedType </td>
          <td>(</td>
          <td class="paramtype">MLIRContext *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DictionaryAttr&#160;</td>
          <td class="paramname"><em>augmentedType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DictionaryAttr&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">llvm::StringMap&lt; llvm::SmallVector&lt; Attribute &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>newAnnotations</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">StringRef&#160;</td>
          <td class="paramname"><em>companion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">StringAttr&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">StringAttr&#160;</td>
          <td class="paramname"><em>defName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional&lt; IntegerAttr &gt;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional&lt; StringAttr &gt;&#160;</td>
          <td class="paramname">description, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Location&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned &amp;&#160;</td>
          <td class="paramname"><em>annotationID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Twine&#160;</td>
          <td class="paramname"><em>clazz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Twine&#160;</td>
          <td class="paramname"><em>path</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Recursively walk a sifive.enterprise.grandcentral.AugmentedType to extract any annotations it may contain. </p>
<p>This is going to generate two types of annotations: 1) Annotations necessary to build interfaces and store them at "~" 2) Scattered annotations for how components bind to interfaces </p>
<p>Return a new identifier that can be used to link scattered annotations together. This mutates the by-reference parameter annotationID.</p>
<p>Optionally unpack a ReferenceTarget encoded as a DictionaryAttr. Return either a pair containing the Target string (up to the reference) and an array of components or none if the input is malformed. The input DicionaryAttr encoding is a JSON object of a serialized ReferenceTarget Scala class. By example, this is converting: ~Foo|Foo&gt;a.b[0] To: {"~Foo|Foo&gt;a", {".b", "[0]"}} The format of a ReferenceTarget object like: circuit: String module: String path: Seq[(Instance, OfModule)] ref: String component: Seq[TargetToken]</p>

<p class="definition">Definition at line <a class="el" href="FIRAnnotations_8cpp_source.html#l00580">580</a> of file <a class="el" href="FIRAnnotations_8cpp_source.html">FIRAnnotations.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="FIRAnnotations_8cpp_source.html#l01229">circt::firrtl::scatterCustomAnnotations()</a>.</p>

</div>
</div>
<a id="a799efec92388cad96a6ba41a01f10cad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a799efec92388cad96a6ba41a01f10cad">&#9670;&nbsp;</a></span>scatterOMField()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Optional&lt;std::pair&lt;StringRef, DictionaryAttr&gt; &gt; scatterOMField </td>
          <td>(</td>
          <td class="paramtype">Attribute&#160;</td>
          <td class="paramname"><em>original</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Attribute&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned &amp;&#160;</td>
          <td class="paramname"><em>annotationID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">llvm::StringMap&lt; llvm::SmallVector&lt; Attribute &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>newAnnotations</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CircuitOp&#160;</td>
          <td class="paramname"><em>circuit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>nlaNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Location&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert an Object Model Field into an optional pair of a string key and a dictionary attribute. </p>
<p>Expand internal source locator strings to location attributes. Scatter any FIRRTL targets into the circuit. If this is an illegal Object Model Field return None.</p>
<p>Each Object Model Field consists of three mandatory members with the following names and types:</p>
<ul>
<li>"info": Source Locator String</li>
<li>"name": String</li>
<li>"value": Object Model IR</li>
</ul>
<p>The key is the "name" and the dictionary consists of the "info" and "value" members. Each value is recursively traversed to scatter any FIRRTL targets that may be used inside it.</p>
<p>This conversion from an object (dictionary) to key&ndash;value pair is safe because each Object Model Field in an Object Model Node must have a unique "name". Anything else is illegal Object Model. </p>

<p class="definition">Definition at line <a class="el" href="FIRAnnotations_8cpp_source.html#l01057">1057</a> of file <a class="el" href="FIRAnnotations_8cpp_source.html">FIRAnnotations.cpp</a>.</p>

<p class="reference">References <a class="el" href="CalyxOps_8cpp_source.html#l00039">circt::calyx::direction::get()</a>, <a class="el" href="namespacecirct_1_1firrtl.html#a9537a2b7f366f94a7a70b5d4ca0d8947">circt::firrtl::maybeStringToLocation()</a>, <a class="el" href="HWOps_8cpp.html#aed86fbb9eba541d4ced1894c75677057a6adf97f83acf6453d4a6a4b1070f3754">None</a>, <a class="el" href="AnnotationDetails_8h_source.html#l00032">circt::firrtl::omirAnnoClass</a>, and <a class="el" href="FIRAnnotations_8cpp_source.html#l00906">scatterOMIR()</a>.</p>

<p class="reference">Referenced by <a class="el" href="FIRAnnotations_8cpp_source.html#l01125">scatterOMNode()</a>.</p>

</div>
</div>
<a id="a6996c176d8479ba108e7e086ac09bf9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6996c176d8479ba108e7e086ac09bf9a">&#9670;&nbsp;</a></span>scatterOMIR()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Optional&lt;Attribute&gt; scatterOMIR </td>
          <td>(</td>
          <td class="paramtype">Attribute&#160;</td>
          <td class="paramname"><em>original</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned &amp;&#160;</td>
          <td class="paramname"><em>annotationID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">llvm::StringMap&lt; llvm::SmallVector&lt; Attribute &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>newAnnotations</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CircuitOp&#160;</td>
          <td class="paramname"><em>circuit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>nlaNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Recursively walk Object Model IR and convert FIRRTL targets to identifiers while scattering trackers into the newAnnotations argument. </p>
<p>Object Model IR consists of a type hierarchy built around recursive arrays and dictionaries whose leaves are "string-encoded types". This is an Object Model-specific construct that puts type information alongside a value. Concretely, these look like: </p><pre class="fragment">'OM' type ':' value
</pre><p>This function is only concerned with unpacking types whose values are FIRRTL targets. This is because these need to be kept up-to-date with modifications made to the circuit whereas other types are just passing through CIRCT.</p>
<p>At a later time this understanding may be expanded or Object Model IR may become its own Dialect. At this time, this function is trying to do as minimal work as possible to just validate that the OMIR looks okay without doing lots of unnecessary unpacking/repacking of string-encoded types. </p>

<p class="definition">Definition at line <a class="el" href="FIRAnnotations_8cpp_source.html#l00906">906</a> of file <a class="el" href="FIRAnnotations_8cpp_source.html">FIRAnnotations.cpp</a>.</p>

<p class="reference">References <a class="el" href="FIRAnnotations_8cpp_source.html#l00313">addNLATargets()</a>, <a class="el" href="FIRAnnotations_8cpp_source.html#l00177">canonicalizeTarget()</a>, <a class="el" href="CalyxOps_8cpp_source.html#l00039">circt::calyx::direction::get()</a>, <a class="el" href="FIRRTLAnnotations_8cpp_source.html#l00442">circt::firrtl::isOMIRStringEncodedPassthrough()</a>, <a class="el" href="HWOps_8cpp.html#aed86fbb9eba541d4ced1894c75677057a6adf97f83acf6453d4a6a4b1070f3754">None</a>, and <a class="el" href="AnnotationDetails_8h_source.html#l00036">circt::firrtl::omirTrackerAnnoClass</a>.</p>

<p class="reference">Referenced by <a class="el" href="FIRAnnotations_8cpp_source.html#l01057">scatterOMField()</a>.</p>

</div>
</div>
<a id="a946d0df8a0982b538165924b863462bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a946d0df8a0982b538165924b863462bb">&#9670;&nbsp;</a></span>scatterOMIRAnnotation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Optional&lt;Attribute&gt; scatterOMIRAnnotation </td>
          <td>(</td>
          <td class="paramtype">DictionaryAttr&#160;</td>
          <td class="paramname"><em>dict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned &amp;&#160;</td>
          <td class="paramname"><em>annotationID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">llvm::StringMap&lt; llvm::SmallVector&lt; Attribute &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>newAnnotations</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CircuitOp&#160;</td>
          <td class="paramname"><em>circuit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>nlaNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Location&#160;</td>
          <td class="paramname"><em>loc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Main entry point to handle scattering of an OMIRAnnotation. </p>
<p>Return the modified optional attribute on success and None on failure. Any scattered annotations will be added to the reference argument <code>newAnnotations</code>. </p>

<p class="definition">Definition at line <a class="el" href="FIRAnnotations_8cpp_source.html#l01198">1198</a> of file <a class="el" href="FIRAnnotations_8cpp_source.html">FIRAnnotations.cpp</a>.</p>

<p class="reference">References <a class="el" href="CalyxOps_8cpp_source.html#l00039">circt::calyx::direction::get()</a>, <a class="el" href="HWOps_8cpp.html#aed86fbb9eba541d4ced1894c75677057a6adf97f83acf6453d4a6a4b1070f3754">None</a>, <a class="el" href="AnnotationDetails_8h_source.html#l00032">circt::firrtl::omirAnnoClass</a>, and <a class="el" href="FIRAnnotations_8cpp_source.html#l01125">scatterOMNode()</a>.</p>

<p class="reference">Referenced by <a class="el" href="FIRAnnotations_8cpp_source.html#l01229">circt::firrtl::scatterCustomAnnotations()</a>.</p>

</div>
</div>
<a id="a88b26e92f469bbc09492a196426f058b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b26e92f469bbc09492a196426f058b">&#9670;&nbsp;</a></span>scatterOMNode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Optional&lt;DictionaryAttr&gt; scatterOMNode </td>
          <td>(</td>
          <td class="paramtype">Attribute&#160;</td>
          <td class="paramname"><em>original</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Attribute&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned &amp;&#160;</td>
          <td class="paramname"><em>annotationID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">llvm::StringMap&lt; llvm::SmallVector&lt; Attribute &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>newAnnotations</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CircuitOp&#160;</td>
          <td class="paramname"><em>circuit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>nlaNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Location&#160;</td>
          <td class="paramname"><em>loc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert an Object Model Node to an optional dictionary, convert source locator strings to location attributes, and scatter FIRRTL targets into the circuit. </p>
<p>If this is an illegal Object Model Node, then return None.</p>
<p>An Object Model Node is expected to look like:</p>
<ul>
<li>"info": Source Locator String</li>
<li>"id": String-encoded integer ('OMID' ':' Integer)</li>
<li>"fields": Array&lt;Object&gt;</li>
</ul>
<p>The "fields" member may be absent. If so, then construct an empty array. </p>
<p>The input attribute must be a dictionary.</p>

<p class="definition">Definition at line <a class="el" href="FIRAnnotations_8cpp_source.html#l01125">1125</a> of file <a class="el" href="FIRAnnotations_8cpp_source.html">FIRAnnotations.cpp</a>.</p>

<p class="reference">References <a class="el" href="CalyxOps_8cpp_source.html#l00039">circt::calyx::direction::get()</a>, <a class="el" href="namespacecirct_1_1firrtl.html#a9537a2b7f366f94a7a70b5d4ca0d8947">circt::firrtl::maybeStringToLocation()</a>, <a class="el" href="HWOps_8cpp.html#aed86fbb9eba541d4ced1894c75677057a6adf97f83acf6453d4a6a4b1070f3754">None</a>, <a class="el" href="AnnotationDetails_8h_source.html#l00032">circt::firrtl::omirAnnoClass</a>, and <a class="el" href="FIRAnnotations_8cpp_source.html#l01057">scatterOMField()</a>.</p>

<p class="reference">Referenced by <a class="el" href="FIRAnnotations_8cpp_source.html#l01198">scatterOMIRAnnotation()</a>.</p>

</div>
</div>
<a id="a0262184e3fcde76a2ebb229f457f8cf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0262184e3fcde76a2ebb229f457f8cf3">&#9670;&nbsp;</a></span>splitAndAppendTarget()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::pair&lt;StringRef, llvm::Optional&lt;ArrayAttr&gt; &gt; splitAndAppendTarget </td>
          <td>(</td>
          <td class="paramtype">NamedAttrList &amp;&#160;</td>
          <td class="paramname"><em>annotation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">StringRef&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MLIRContext *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutably update a prototype Annotation (stored as a <code>NamedAttrList</code>) with subfield/subindex information from a Target string. </p>
<p>Subfield/subindex information will be placed in the key "target" at the back of the Annotation. If no subfield/subindex information, the Annotation is unmodified. Return the split input target as a base target (include a reference if one exists) and an optional array containing subfield/subindex tokens. </p>

<p class="definition">Definition at line <a class="el" href="FIRAnnotations_8cpp_source.html#l00165">165</a> of file <a class="el" href="FIRAnnotations_8cpp_source.html">FIRAnnotations.cpp</a>.</p>

<p class="reference">References <a class="el" href="FIRAnnotations_8cpp_source.html#l00153">appendTarget()</a>, and <a class="el" href="FIRAnnotations_8cpp_source.html#l00036">splitTarget()</a>.</p>

<p class="reference">Referenced by <a class="el" href="FIRAnnotations_8cpp_source.html#l00313">addNLATargets()</a>, and <a class="el" href="FIRAnnotations_8cpp_source.html#l01229">circt::firrtl::scatterCustomAnnotations()</a>.</p>

</div>
</div>
<a id="a5a44197db0a9fe5e27c42423efb57f52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a44197db0a9fe5e27c42423efb57f52">&#9670;&nbsp;</a></span>splitTarget()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::pair&lt;StringRef, llvm::Optional&lt;ArrayAttr&gt; &gt; splitTarget </td>
          <td>(</td>
          <td class="paramtype">StringRef&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MLIRContext *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Split a target into a base target (including a reference if one exists) and an optional array of subfield/subindex tokens. </p>

<p class="definition">Definition at line <a class="el" href="FIRAnnotations_8cpp_source.html#l00036">36</a> of file <a class="el" href="FIRAnnotations_8cpp_source.html">FIRAnnotations.cpp</a>.</p>

<p class="reference">References <a class="el" href="CalyxOps_8cpp_source.html#l00039">circt::calyx::direction::get()</a>, and <a class="el" href="HWOps_8cpp.html#aed86fbb9eba541d4ced1894c75677057a6adf97f83acf6453d4a6a4b1070f3754">None</a>.</p>

<p class="reference">Referenced by <a class="el" href="FIRAnnotations_8cpp_source.html#l00165">splitAndAppendTarget()</a>.</p>

</div>
</div>
<a id="adc0b2652aad68a41fb4bcd6115cb74c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc0b2652aad68a41fb4bcd6115cb74c5">&#9670;&nbsp;</a></span>tryGetAs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename A &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static A tryGetAs </td>
          <td>(</td>
          <td class="paramtype">DictionaryAttr &amp;&#160;</td>
          <td class="paramname"><em>dict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Attribute &amp;&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">StringRef&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Location&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Twine&#160;</td>
          <td class="paramname"><em>className</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Twine&#160;</td>
          <td class="paramname"><em>path</em> = <code>Twine()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements the same behavior as DictionaryAttr::getAs&lt;A&gt; to return the value of a specific type associated with a key in a dictionary. </p>
<p>However, this is specialized to print a useful error message, specific to custom annotation process, on failure. </p>

<p class="definition">Definition at line <a class="el" href="FIRAnnotations_8cpp_source.html#l00221">221</a> of file <a class="el" href="FIRAnnotations_8cpp_source.html">FIRAnnotations.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 6 2021 00:16:51 for CIRCT by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
